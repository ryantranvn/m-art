$(document).ready(function(){var u=t();var d="";if($(".language-switch").length>0){$(".language-switch").find("a.lang").click(function(w){w.preventDefault();$('input[name="locale"]').val($(this).attr("data-lang"));$("#frmLanguageSwitch").submit()})}function l(x){var w='<div class="alert alert-danger alert-dismissible"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span class="col-white" aria-hidden="true">×</span></button><ul>';w+="<li>"+x+"</li>";w+="</ul></div>";return w}function r(x){var w='<div class="alert alert-success alert-dismissible"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span class="col-white" aria-hidden="true">×</span></button><ul>';w+="<li>"+x+"</li>";w+="</ul></div>";return w}function g(){if($(".alert").length>0){setTimeout(function(){$(".alert").fadeOut(1000)},3000)}}$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});$(document).ajaxStart(function(){$(".page-loader-wrapper").fadeIn()});$(document).ajaxStop(function(){$(".page-loader-wrapper").fadeOut()});$.validator.setDefaults({highlight:function(w){$(w).parents(".form-line").addClass("error")},unhighlight:function(w){$(w).parents(".form-line").removeClass("error")},errorPlacement:function(w,x){$(x).parents(".form-group").append(w)}});$.validator.addMethod("filesize",function(x,w,y){return this.optional(w)||(w.files[0].size<=y)},function(w){return trans.over_max_size+filesize(w,{exponent:2,round:1})});function e(w){return w.prop("tagName").toLowerCase()}var q=$("#leftsidebar");$("body").on("click",".navHide",function(){q.removeClass("bounceInLeft").addClass("bounceOutLeft");$("section.content").animate({marginLeft:"20px"},"liner");$(".navShow").removeClass("hide")});$("body").on("click",".navShow",function(){$("section.content").animate({marginLeft:"265px"},"liner");q.removeClass("bounceOutLeft").addClass("bounceInLeft")});$("body").on("click",".btnDelete",function(x){x.preventDefault();var w=$(this).attr("data-action");swal({title:trans.swal_delete_title,text:trans.swal_delete_text,type:"warning",showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:trans.swal_delete_btn_confirm,closeOnConfirm:false},function(){$("#frmDelete").attr("action",w).submit()})});if($("body").find(".positiveNumber").length>0){p()}function p(){$("body").find(".positiveNumber").inputmask({alias:"numeric",groupSeparator:"",autoGroup:true,digits:0,digitsOptional:false,prefix:"",allowMinus:false,rightAlign:false,removeMaskOnSubmit:true})}if($("body").find(".currencyPositive").length>0){s()}function s(){$("body").find(".currencyPositive").inputmask({alias:"numeric",groupSeparator:",",autoGroup:true,digits:0,digitsOptional:false,prefix:"",allowMinus:false,removeMaskOnSubmit:true})}if($(".switch input[type=checkbox]").length>0){$("body").find(".switch input[type=checkbox]").each(function(){var w=$(this);f(w)});$("body").on("change",".switch input[type=checkbox]",function(){var w=$(this);f(w)});function f(z){var y=z.prop("checked");var x=z.closest(".switch").find(".switchOn");var w=z.closest(".switch").find(".switchOff");if(y==true){z.val(1);x.addClass("switchOnActive");w.removeClass("switchOffActive")}else{z.val(0);w.addClass("switchOffActive");x.removeClass("switchOnActive")}}}if($("table.tableResize").length>0){$("table.tableResize").colResizable({hoverCursor:"ew-resize",dragCursor:"ew-resize"})}if(!$.isEmptyObject(u)&&u.sorting!=undefined){d=u.sorting;var o=$("body").find(".table th.sorting[data-sort="+d+"]");if(u.by=="asc"){o.addClass("sorting_asc")}else{o.addClass("sorting_desc")}}$("body").on("click",".table th.sorting",function(){var z=$(this);var w=z.attr("data-sort");var y=window.location.href;u=t();if($.isEmptyObject(u)){d+="?sorting="+w+"&by=asc";window.location.href=y+d}else{if(u.sorting==undefined||u.sorting===""){d+="&sorting="+w+"&by=asc";window.location.href=y+d}else{var B="";var A=location.href;var x=u.sorting;if(x!=w){B=A.replace("sorting="+x,"sorting="+w)}else{if(u.by=="asc"){B=A.replace("by=asc","by=desc")}else{B=A.replace("by=desc","by=asc")}}window.location.href=B}}});function t(w){var x={};location.search.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(A,z,y){x[z]=y});return w?x[w]:x}if($(".limit").length>0){$(".limit255").maxlength({max:255,feedbackText:"{c}/{m}"});$(".limit1024").maxlength({max:1024,feedbackText:"{c}/{m}"})}if($(".spinner").length>0){$(".spinner").spinner()}function h(x,w,A){var y=$("#"+x);var z;y.on("show.bs.modal",function(B){y.find("#"+w).each(function(){z=$(this);y.find(".frmModal").each(function(){$(this).addClass("hide")});if(w!="frmStatus"){y.find('input[type="password"]').val("");y.find('input[type="text"]').val("");y.find("label.error").remove()}z.removeClass("hide")});if(y.find('input[name="id"]').length>0){y.find('input[name="id"]').val(A)}if(y.find(".btnModalSubmit").length>0){y.find(".btnModalSubmit").click(function(){z.submit()})}$("body").on("click","#frmStatus a.btn",function(E){E.preventDefault();$(".page-loader-wrapper").fadeIn();var D=$(this).closest("#frmStatus");var C=$(this).attr("data-status");D.find('input[name="status"]').val(C);D.submit()})});y.modal({backdrop:"static",keyboard:false})}$("body").on("click",".btnStatus",function(){var w=$(this).attr("data-id");h("modal","frmStatus",w)});if($("body").find(".editInline").length>0){var m='<span></span><i class="material-icons iconEditInline">mode_edit</i>';$("body").find(".editInline").each(function(){var x=$(this);var w=x.html();x.html("").html(m).find("span").html(w)});$("body").on("click",".editInline",function(){var x=$(this);var w=x.find("span").html();if(x.find("input").length==0){x.html("").html('<input type="text" class="inputEditInline positiveNumber" maxlength="3" data-old="'+w+'" value="'+w+'" />');p();$(".inputEditInline").focus().select()}});$("body").on("blur",".editInline input.inputEditInline",function(){var w=$(this);j(w)});$("body").on("keydown",".editInline input.inputEditInline",function(y){var x=y.charCode?y.charCode:y.keyCode?y.keyCode:0;if(x==13){y.preventDefault();var w=$(this);j(w)}});function j(w){var x=w.attr("data-old");var B=w.val();var D=w.parent("td.editInline");var A=D.attr("data-field");var y=D.attr("data-field-id");var C=D.attr("data-id");var z=D.attr("data-table");if(B==""){B=x}$.ajax({url:ajaxUrl+"/edit-inline",dataType:"json",method:"post",data:{table:z,fieldId:y,id:C,field:A,val:B},success:function(E){if(E.error==0){D.html("").html(m).find("span").html(B);D.closest(".card").find(".body").find(".block-header").after(r(E.msg))}else{D.html("").html(m).find("span").html(x);D.closest(".card").find(".body").find(".block-header").after(l(E.msg))}g()},error:function(){swal({title:trans.swal_error_title,text:trans.swal_error_content,type:"error"},function(){w.focus().select()});g()}})}}$("body").on("click",".btnChangePassword",function(){var w=$(this).attr("data-id");h("modal","frmChangePassword",w)});function a(w){w.find('input[type="text"]').each(function(){if($(this).val().trim()==""||$(this).val().trim()==""){$(this).prop("disabled",true)}})}if($(".searchStatus").length>0){$("#search_all").click(function(){var x=$(this).prop("checked");if(x){$(".searchStatus").find('input[type="checkbox"]').prop("checked",true);$(".searchStatus").find("input.searchVal").val("")}else{$(".searchStatus").find('input[type="checkbox"]').prop("checked",false);var w=$(".searchStatus").find('input[type="checkbox"]:nth-of-type(2)');w.prop("checked",true);$(".searchStatus").find("input.searchVal").val(w.val())}});$(".searchStatus").find('input[type="checkbox"]:not(#search_all)').click(function(){$(".searchStatus").find('input[type="checkbox"]').prop("checked",false);$(this).prop("checked",true);$(".searchStatus").find("input.searchVal").val($(this).val())})}$("body").on("click",".btnResetSearch",function(){$(this).closest("form.searchForm")[0].reset();$(this).closest("form.searchForm").find('input[type="text"]').each(function(){$(this).val("")});$(this).closest("form.searchForm").find('input[type="radio"]').each(function(){$(this).prop("checked",false)});$(this).closest("form.searchForm").find("#search_all").prop("checked",true);$(".selectpicker").val("");$(".selectpicker").selectpicker("refresh")});if($("select.province_id").length>0&&$("select.district_id").length>0){$("select.province_id").on("changed.bs.select",function(z){var w=z.target;var A=w.value;var y=w.getAttribute("address-group");var x=$('select[name="district_id"][address-group="'+y+'"]');$.ajax({url:"/ajax/get-districts",dataType:"json",method:"post",data:{provinceId:A},success:function(C){if(C.error===0){var B="";$.each(C.districts,function(D,E){B+='<option value="'+E.district_id+'">'+E.type+" "+E.name+"</option>"});x.html(B);x.selectpicker("refresh")}},error:function(){swal({title:trans.swal_error_title,text:trans.swal_error_content,type:"error"})}})})}function n(){return Math.random().toString(36).substr(2,6).toUpperCase()}function c(w,x,y){window.KCFinder={callBack:function(z){var A=z.substr(z.indexOf("/upload/"));w.val(A);window.KCFinder=null;if(typeof y=="function"){y()}}};window.open("/kcfinder/browse.php?type="+x+"&dir="+x+"/public","kcfinder_textbox","status=0, toolbar=0, location=0, menubar=0, directories=0, resizable=1, scrollbars=0, width=800, height=600, top=30, left=30")}function i(w,x,y){window.KCFinder={callBackMultiple:function(A){window.KCFinder=null;for(var z=0;z<A.length;z++){var B=A[z].substr(A[z].indexOf("/upload/"));w.value+=B+"\n"}if(typeof y=="function"){y()}}};if(x=="image"){window.open("/kcfinder/browse.php?type=images&dir=images/public","kcfinder_multiple","status=0, toolbar=0, location=0, menubar=1, directories=0, resizable=1, scrollbars=0, width=800, height=600")}else{if(x=="doc"){window.open("/kcfinder/browse.php?type=docs&dir=docs/public","kcfinder_multiple","status=0, toolbar=0, location=0, menubar=0, directories=0, resizable=1, scrollbars=0, width=800, height=600")}}}if($(".thumbnailContainer").length>0){var b=false;if($(".thumbnailMultiple").length>0){b=true}var k='<div class="thumbnailWrap">';k+='<a href="#" class="thumbnailFrame">';k+='<img src="'+themeUrl+'/images/default.jpg" class="img-responsive thumbnail" />';if(b==true){k+='<input type="text" name="picture[]" class="inputPicture hiddenInput" readonly />'}else{k+='<input type="text" name="picture" class="inputPicture hiddenInput" readonly />'}k+="</a>";k+='<i class="material-icons col-red delThumbnail hide">clear</i>';k+="</div>";$("body").on("click","a.thumbnailFrame",function(x){x.preventDefault();var w=$(this).children(".inputPicture");c(w,"images",function(){var y=w.val();var z=w.parent("a.thumbnailFrame");z.children("img.thumbnail").attr("src","/storage"+y);z.next(".delThumbnail").removeClass("hide");var A=$(".thumbnailContainer").find(".delThumbnail:visible").length;if(b==true&&A<=4){$(".thumbnailContainer").append(k)}})});$("body").on("click",".delThumbnail",function(z){var w=$(this).parent(".thumbnailWrap");w.remove();var y=$(".thumbnailContainer").find(".delThumbnail:visible").length;var x=$(".thumbnailContainer").find(".thumbnailFrame:visible").length;if(b==false){$(".thumbnailContainer").append(k)}})}if($(".tinyEditor").length>0){tinymce.init({selector:"textarea.tinyEditor",menubar:false})}if($('select[name="supplier_id"]').length>0){$('select[name="supplier_id"]').on("changed.bs.select",function(x){var w=x.target;var z=w.value;var y=w[x.target.selectedIndex].getAttribute("data-location-id");if($(this).attr("class").indexOf("forSearch")==-1&&$('input[name="province_name"]').length>0){$.ajax({url:ajaxUrl+"/get-supplier",dataType:"json",method:"post",data:{supplierId:z},success:function(B){if(B.error==0){var A=B.supplier;$('input[name="province_name"]').val(A.province_name)}},error:function(){swal("Error")}})}else{if($('select[name="province_id"]').length>0){console.log("asdfasdf");$('select[name="province_id"]').val(y);$('select[name="province_id"]').selectpicker("refresh")}}})}if($(".hasDetailRow").length>0){$(".hasDetailRow").find("td.details-control").each(function(){var y=$(this);var w=$(this).parent();var x=w.children("td").length;y.click(function(){if(!w.hasClass("shown")){var A=y.attr("data-id");var z=y.attr("data-note");if($(".tableOrder").length>0){v(w,A,z,x)}}else{w.next("tr").remove();w.removeClass("shown")}})})}if($("#frmSupplier").length>0){$("#frmSupplier").validate({rules:{name:{required:true,maxlength:255},province_id:{required:true}},submitHandler:function(w){w.submit()}})}if($("#frmUploadPicture").length>0){$("body").on("click","a.btnPicture",function(w){w.preventDefault();$("#frmUploadPicture").find('input[type="file"]').click()});$("body").on("change",'input[type="file"]',function(){$("#frmUploadPicture").submit()});$("#frmUploadPicture").validate({rules:{file:{required:true,accept:"image/*",filesize:maxsize}},errorPlacement:function(w,x){$(".errorPicture").html(w).removeClass("hide")},submitHandler:function(w){w.submit()}})}$("body").on("click",".btnGeneratePassword",function(){var w=n();$('input[name="password_auto"]').val(w);$('input[name="password"]').val(w);$('input[name="password_confirmation"]').val(w);$(".btnClearAutoPassword").removeClass("hide")});$("body").on("click",".btnClearAutoPassword",function(){$('input[name="password_auto"]').val("");$('input[name="password"]').val("");$('input[name="password_confirmation"]').val("");$(this).addClass("hide")});if($("#frmUser").length>0){$("#frmUser").validate({rules:{name:{required:true,maxlength:255},email:{required:true,email:true},password:{required:true,minlength:6,maxlength:255},password_confirmation:{equalTo:"#password"}},submitHandler:function(w){w.submit()}})}if($("#frmChangePassword").length>0){$("#frmChangePassword").validate({rules:{password:{required:true,minlength:6,maxlength:255},password_confirmation:{equalTo:"#password"}},submitHandler:function(w){w.submit()}})}if($("#frmSearchCategory").length>0){$("#frmSearchCategory").validate({rules:{category_name:{require_from_group:[1,".searchCategory"],maxlength:255},category_status:{require_from_group:[1,".searchCategory"]}},submitHandler:function(w){a($("#frmSearchCategory"));w.submit()}})}if($("#frmCategory").length>0){$("#frmCategory").validate({rules:{category_name:{required:true,maxlength:255},category_desc:{maxlength:1024},category_order:{required:true,max:999}}})}if($("#frmProduct").length>0){$("#frmProduct").validate({rules:{supplier_id:{required:true},category_id:{required:true},name:{required:true,maxlength:255}}})}function v(y,x,w,z){$.ajax({url:ajaxUrl+"/get-order-detail",dataType:"json",method:"post",data:{orderId:x},success:function(C){if(C.error==0){var B="";B+='<div class="col-sm-12 p-l-20 p-t-5">';B+='<p class="font-bold">'+trans.order_detail+"</p>";B+='<table class="table tblExtend">';B+="<thead>";B+="<tr>";B+='<td class="align-center">#</td>';B+='<td class="align-center">'+trans.product_name+"</td>";B+='<td class="align-center">'+trans.product_price+"</td>";B+='<td class="align-center">'+trans.product_quantity+"</td>";B+='<td class="align-center">'+trans.product_total+"</td>";B+="</tr>";B+="</thead>";$.each(C.orderDetails,function(D,E){B+="<tr>";B+='<td class="align-center">'+(D+1)+"</td>";B+="<td>"+E.product_name+"</td>";B+='<td class="align-right"><span class="currencyPositive">'+E.price+"</span></td>";B+='<td class="align-right">'+E.quantity+"</td>";B+='<td class="align-right"><span class="currencyPositive">'+E.total+"</span></td>";B+="</tr>"});B+="</table>";B+="</div>";B+='<div class="col-sm-12 p-l-20 p-t-5">';B+='<p class="font-bold">'+trans.note+"</p>";B+='<textarea class="form-control orderNote" rows="5">'+w+"</textarea>";B+='<button class="btn btn-primary m-t-10 align-right btnSaveOrderNote" data-id="'+x+'">'+trans.btn_save_order_note+"</button>";B+='<span class="successReply col-red p-l-20"></span>';B+="</div>";var A='<tr class="row-extend"><td class="bg-yellow"></td><td style="padding: 10px !important" colspan="'+(z-1)+'">'+B+"</td></tr>";y.after(A);y.addClass("shown");s()}else{swal({type:"error",title:C.msg})}},error:function(){swal({type:"error",title:trans.swal_error_title})}})}$("body").on("click",".btnSaveOrderNote",function(){var x=$(this);var w=x.attr("data-id");var y=x.prev("textarea.orderNote").val().trim();if(y==""){swal({type:"error",title:trans.require_input_content})}else{$.ajax({url:ajaxUrl+"/update_order_note",dataType:"json",method:"post",data:{orderId:w,note:y},success:function(z){if(z.error==0){x.next(".successReply").html(z.msg).fadeIn("fast").delay(3000).fadeOut("slow")}else{swal({type:"error",title:z.msg})}},error:function(){swal({type:"error",title:trans.swal_error_title})}})}})});