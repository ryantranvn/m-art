$(function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});function d(e){var f={};location.search.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(i,h,g){f[h]=g});return e?f[e]:f}$(".positiveNumber").on("keypress keyup blur",function(e){$(this).val($(this).val().replace(/[^\d].+/,""));if((e.which<48||e.which>57)){e.preventDefault()}});if($("body").find(".currencyPositive").length>0){a()}function a(){$("body").find(".currencyPositive").inputmask({alias:"numeric",groupSeparator:",",autoGroup:true,digits:0,digitsOptional:false,prefix:"",allowMinus:false,removeMaskOnSubmit:true})}if($(".product-quantity").length>0){$("body").on("click",".qtyplus",function(k){k.preventDefault();var i=$(this);var h=i.parent(".product-quantity");var f=h.find('input[name="qty"]');var j=h.find(".qtyminus");var g=parseInt(f.val());if(g<maxQuantity){j.prop("disabled",false);f.val(g+1).trigger("change");if(f.val()>=maxQuantity){i.prop("disabled",true)}}});$("body").on("click",".qtyminus",function(){var i=$(this);var g=i.parent(".product-quantity");var e=g.find('input[name="qty"]');var h=g.find(".qtyplus");var f=parseInt(e.val());if(f>1){h.prop("disabled",false);e.val(f-1).trigger("change");if(e.val()<=1){i.prop("disabled",true)}}});var c=0;$("body").on("focus",'input[name="qty"]',function(f){c=$(this).val()});$("body").on("change",'input[name="qty"]',function(k){var f=$(this);var h=f.parent(".qty").parent(".product-quantity");var i=h.find(".qtyplus");var j=h.find(".qtyminus");var g=parseInt(f.val());if(f.val()==""||g<=0||g>maxQuantity){f.val(c);b(trans.require_max_20)}else{if(g==1){i.prop("disabled",false);j.prop("disabled",true)}else{if(g==maxQuantity){i.prop("disabled",true);j.prop("disabled",false)}}if(h.hasClass("inCart")){updateCart(h,true)}}})}if($(".btn-addCartOne").length>0){$(".btn-addCartOne").click(function(){var f=$(this).attr("data-product-id");var g=1;var e=false;ajaxAddCart("",f,g,e)})}if($("#frmSearch").length>0){$("#frmSearch").validate({rules:{search:{required:true,maxlength:255}},submitHandler:function(e){e.submit()}})}if($(".sortProduct").length>0){$(".sortProduct").change(function(){var i=$(this).val();var h=window.location.href;var e=window.location.pathname;var g=d();if($.isEmptyObject(g)){window.location.href=h.replace("price=asc","price=desc")}else{if(g.price==undefined||g.price===""){window.location.href=h+"&price="+i}else{switch(i){case"default":delete (g.price);var f="";$.each(g,function(j,k){f+=j+"="+k});window.location.href=e+"?"+f;break;case"asc":window.location.href=h.replace("price=desc","price=asc");break;case"desc":window.location.href=h.replace("price=asc","price=desc");break}}}})}if($("#frmSubscribe").length>0){$("#frmSubscribe").validate({rules:{subscribe_email:{required:true,email:true,maxlength:255}},submitHandler:function(e){var f=$('input[name="subscribe_email"]').val().trim();$.ajax({url:"/ajax/subscribe",dataType:"json",method:"post",data:{subscribe_email:f},success:function(g){if(g.error==0){$("#modal").find(".modal-body").html("<p>Thank you ! We will send subscribe news to you.</p>");$("#modal").modal();$('input[name="subscribe_email"]').val("");$("#subscribe_email-error").remove()}else{$('input[name="subscribe_email"]').after('<label id="subscribe_email-error" class="error" for="subscribe_email">'+g.msg+"</label>")}},error:function(){b("Error")}});return false}})}if($("select.province_id").length>0&&$("select.district_id").length>0){$("select.province_id").on("changed.bs.select",function(i){var f=i.target;var j=f.value;var h=f.getAttribute("address-group");var g=$('select[name="district_id"][address-group="'+h+'"]');$.ajax({url:"/ajax/get-districts",dataType:"json",method:"post",data:{provinceId:j},success:function(k){if(k.error===0){var e="";$.each(k.districts,function(l,m){e+='<option value="'+m.district_id+'">'+m.type+" "+m.name+"</option>"});g.html(e);g.selectpicker("refresh")}},error:function(){b("Error")}})})}function b(e){$("#modal").find(".modal-body").html(e);$("#modal").modal()}if($(".modalContent").length>0){b("<p>"+$(".modalContent").html()+"</p>")}$("#modal").on("shown.bs.modal",function(f){});setTimeout(function(){$(".page-loader-wrapper").fadeOut()},50)});